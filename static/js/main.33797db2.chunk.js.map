{"version":3,"sources":["../node_modules/peerjs/dist sync","routes.js","components/Header.jsx","localization/rules.js","components/HowToUse.jsx","components/Method.jsx","api/userApi.js","api/roomApi.js","components/Room.jsx","localization/languages.js","components/Form.jsx","components/Home.jsx","App.js","reportWebVitals.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","METHOD","withRouter","history","className","Navbar","expand","Brand","onClick","push","Toggle","Collapse","Nav","Link","routes","Divider","LocalizedStrings","en","whyThisWorks","howToRule1","howToRule2","howToRule3","howToRule4","howToRule5","es","fr","cmn","HowToUse","rules","RuleStrings","href","style","display","flexDirection","alignItems","marginRight","marginTop","Accordion","maxWidth","expanded","AccordionSummary","expandIcon","textAlign","AccordionDetails","List","map","x","index","ListItem","Method","BASE_ADDRESS","process","GetUserId","a","userId","localStorage","getItem","CreateNewEmphemeralAccount","setItem","fetch","method","body","JSON","stringify","res","console","log","json","_id","GetJoinableRoom","native","language","userApi","roomId","MyVideo","styled","video","MainVideo","countdownRenderer","hours","minutes","seconds","completed","props","UserVideo","match","params","location","state","learning","userVideo","useRef","useState","newRoom","setNewRoom","partnerVideo","socket","stream","setStream","streamRef","peerRef","searching","setSearching","theirMicOn","setTheirMicOn","myMicOn","setMyMicOn","roomApi","newRoomId","pathname","current","disconnect","srcObject","connectToUser","otherUserId","peer","call","on","userVideoStream","useEffect","io","connect","transports","navigator","mediaDevices","getUserMedia","audio","then","Peer","initiator","host","port","secure","emit","answer","setTimeout","value","getTracks","forEach","track","stop","enabled","playsInline","muted","ref","autoPlay","PartnerVideo","backgroundColor","renderer","date","Date","now","position","right","bottom","justifyContent","width","Tooltip","title","Button","variant","fontSize","English","French","Spanish","Chinese","FindAPartner","Native","Learning","nativeLanguage","setNativeLanguage","learningLanguage","fieldSettingList","languageLearningOptions","alert","getJoinableRoomId","Grid","marginLeft","marginBottom","y","Box","sx","minWidth","paddingBottom","FormControl","fullWidth","InputLabel","Languages","Select","labelId","label","onChange","evt","setter","target","MenuItem","Home","App","setUserId","loadedUserId","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yJAAA,SAASA,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,K,kKCJZC,EAAS,U,gBCwDPC,eAtDA,SAAC,GAAe,IAAdC,EAAa,EAAbA,QAgBf,OACE,sBAAKC,UAAU,SAAf,UACE,eAACC,EAAA,EAAD,CAAQC,OAAO,KAAf,UACE,eAACD,EAAA,EAAOE,MAAR,CAAcC,QANA,WAClBL,EAAQM,KDpBQ,MCyBZ,UACG,IACD,mDASC,OAGH,cAACJ,EAAA,EAAOK,OAAR,CAAe,gBAAc,qBAC7B,cAACL,EAAA,EAAOM,SAAR,CAAiBX,GAAG,mBAApB,SACA,eAACY,EAAA,EAAD,CAAKR,UAAU,UAAf,UACI,cAACQ,EAAA,EAAIC,KAAL,CAAUL,QA7BM,WACxBL,EAAQM,KDTY,cCqCZ,wBACA,cAACG,EAAA,EAAIC,KAAL,CAAUL,QA3BI,WACtBL,EAAQM,KAAKK,IA0BL,kCAYN,cAACC,EAAA,EAAD,U,mCCrDS,MAAIC,IAAiB,CACnCC,GAAG,CACDC,aAAc,iBACdC,WAAY,oEACZC,WAAY,0CACZC,WAAY,2FACZC,WAAY,iEACZC,WAAY,kGAEdC,GAAI,CACDN,aAAc,yBACdC,WAAY,kDACZC,WAAY,2CACZC,WAAY,kHACZC,WAAY,mFACZC,WAAY,wHAEfE,GAAI,CACHP,aAAc,yBACdC,WAAY,kDACZC,WAAY,yCACZC,WAAY,wHACZC,WAAY,qGACZC,WAAY,yHAEbG,IAAK,CACJR,aAAc,uCACdC,WAAY,6FACZC,WAAY,2EACZC,WAAY,uLACZC,WAAY,uIACZC,WAAY,qJ,sDCeCI,EArCE,WACf,IAAMC,EAAQ,CACZ,gCAAMC,EAAYV,WAAlB,KAA+B,oBAAGW,KAAK,UAAR,cAAoBD,EAAYX,aAAhC,OAA/B,OACAW,EAAYT,WACZS,EAAYR,WACZQ,EAAYP,WACZO,EAAYN,YAEd,OACE,qBAAKQ,MAAO,CAAEC,QAAS,OAAQC,cAAe,SAAUC,WAAY,SAAUC,YAAa,IAAKC,UAAW,KAA3G,SACE,eAACC,EAAA,EAAD,CAAWN,MAAO,CAAEO,SAAU,KAAOC,UAAU,EAA/C,UACE,cAACC,EAAA,EAAD,CACEC,WAAY,cAAC,IAAD,IACZ,gBAAc,kBACdzC,GAAG,iBAHL,SAKE,oBAAI+B,MAAO,CAACW,UAAW,UAAvB,uBAEF,cAACC,EAAA,EAAD,UACA,cAACC,EAAA,EAAD,UAEEhB,EAAMiB,KAAI,SAACC,EAAGC,GACZ,OACE,eAACC,EAAA,EAAD,WACI,sBAAKjB,MAAO,CAACC,QAAS,QAAtB,cAAiCe,EAAQ,EAAzC,IAA6C,KAA7C,IAAoDD,EAApD,OACA,cAAC,IAAD,oBC3BHG,EANA,WACb,OACE,cAAC,EAAD,K,uJCJEC,EAAeC,iBAEd,SAAeC,IAAtB,+B,4CAAO,4BAAAC,EAAA,yDAEU,QADXC,EAASC,aAAaC,QAAQ,WAD7B,gCAGYC,IAHZ,OAGHH,EAHG,OAIHC,aAAaG,QAAQ,SAAUJ,GAJ5B,gCAOEA,GAPF,4C,sBAUA,SAAeG,IAAtB,+B,4CAAO,gCAAAJ,EAAA,sEACaM,MAAM,GAAD,OAAIT,EAAJ,oCAAoD,CAAEU,OAAQ,OAAQC,KAAMC,KAAKC,UAAU,MAD7G,cACCC,EADD,OAELC,QAAQC,IAAI,MAAOF,GAFd,SAGcA,EAAIG,OAHlB,cAGCA,EAHD,OAKQb,EAAWa,EAAhBC,IALH,kBAOEd,GAPF,4C,sBCZP,I,MAAMJ,GAAeC,iBAGd,SAAekB,GAAtB,qC,8CAAO,WAA+BC,EAAQC,GAAvC,iCAAAlB,EAAA,4FAA+D,KACpEY,QAAQC,IAAI,eADP,SAEgBM,IAFhB,cAEClB,EAFD,OAGLW,QAAQC,IAAI,gBAAiBZ,GAHxB,SAKaK,MAAM,GAAD,OAAIT,GAAJ,0CAAkDoB,EAAlD,qBAAqEC,EAArE,mBAAwFjB,IAL1G,cAKCU,EALD,iBAMcA,EAAIG,OANlB,eAMCA,EAND,OAQGM,EAAWN,EAAXM,OARH,kBAUEA,GAVF,4C,yBCYP,IAAMC,GAAUC,IAAOC,MAAV,mHAQPC,GAAYF,IAAOC,MAAV,2DAMTE,GAAoB,SAAC,GAA2C,EAAzCC,MAA0C,IAAnCC,EAAkC,EAAlCA,QAASC,EAAyB,EAAzBA,QAC3C,OADoE,EAAhBC,UAG3C,kHAGA,iCAAOF,EAAP,IAAiBC,MAkMb/E,gBA9LF,SAACiF,GAEZ,IA6JIC,EAzJEX,EAWFU,EAbFE,MACEC,OACEb,OAGJnB,EAQE6B,EARF7B,OACAnD,EAOEgF,EAPFhF,QARF,EAeIgF,EANFI,SACEC,MACElB,EAXN,EAWMA,OACAmB,EAZN,EAYMA,SAMAC,EAAYC,mBAClB,EAA8BC,mBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACMC,EAAeJ,mBACfK,EAASL,mBACf,EAA4BC,qBAA5B,mBAAOK,EAAP,KAAeC,EAAf,KACMC,EAAYR,mBACZS,EAAUT,mBAChB,EAAkCC,oBAAS,GAA3C,mBAAOS,EAAP,KAAkBC,EAAlB,KACA,EAAoCV,oBAAS,GAA7C,mBAAOW,EAAP,KAAmBC,EAAnB,KACA,EAA8BZ,oBAAS,GAAvC,mBAAOa,EAAP,KAAgBC,EAAhB,KA7BsB,4CAiCtB,4BAAArD,EAAA,6DACEY,QAAQC,IAAI,2CADd,SAEwByC,GAAwBrC,EAAQmB,GAFxD,OAEMmB,EAFN,OAGEzG,EAAQM,KAAK,CACX+E,MAAO,CACLC,WACAnB,UAEFuC,SAAU/F,SAAoB8F,IAEhCZ,EAAOc,QAAQC,aACfhB,EAAae,QAAQE,UAAY,KAGjClB,EAAWD,EAAU,GAdvB,4CAjCsB,sBAkDtB,SAASoB,EAAcC,GACrB,IAAMC,EAAOf,EAAQU,QACrB7C,QAAQC,IAAI,mBAAoBiD,GAChClD,QAAQC,IAAI,WAAYgD,EAAa,SAAUjB,GAC/C,IAAMmB,EAAOD,EAAKC,KAAKF,EAAaf,EAAUW,SAE9C7C,QAAQC,IAAI,OAAQkD,GAEpBA,EAAKC,GAAG,UAAU,SAAAC,GAChBrD,QAAQC,IAAI,mBAAoBoD,GAChCvB,EAAae,QAAQE,UAAYM,EACjChB,GAAa,MAGfc,EAAKC,GAAG,SAAS,WACftB,EAAae,QAAU,KACvBR,GAAa,MAnCjBrC,QAAQC,IAAI,SAAUI,EAAQmB,EAAUN,GA6CxCoC,qBAAU,WACRtD,QAAQC,IAAI,+BACZ8B,EAAOc,QAAUU,IAAGC,QAAQtE,iBAA+B,CAAEuE,WAAa,CAAC,eAC3EC,UAAUC,aAAaC,aAAa,CAAEjD,OAAO,EAAMkD,OAAO,IAAQC,MAAK,SAAA9B,GACrEC,EAAUD,GACVE,EAAUW,QAAUb,EAChBP,EAAUoB,UACZpB,EAAUoB,QAAQE,UAAYf,GAGhC,IAAMkB,EAAO,IAAIa,IAAK,CACpBC,WAAW,EACXhC,OAAQA,EACRiC,KAAM,8BACNC,KAAM,IACNC,QAAQ,IAEVhC,EAAQU,QAAUK,EAElBA,EAAKE,GAAG,QAAQ,SAAArH,GACdgG,EAAOc,QAAQuB,KAAK,aAAc/E,GAClC0C,EAAOc,QAAQO,GAAG,gBAAgB,WAChCpD,QAAQC,IAAI,kCACZ8B,EAAOc,QAAQuB,KAAK,YAAa5D,EAAQzE,SAI7CmH,EAAKE,GAAG,QAAQ,SAAAD,GACdnD,QAAQC,IAAI,sCACZoC,GAAa,GACXc,EAAKkB,OAAOnC,EAAUW,SAEtBM,EAAKC,GAAG,UAAU,SAAApB,GAChBhC,QAAQC,IAAI,mBACR6B,EAAae,UACff,EAAae,QAAQE,UAAYf,MAGrCmB,EAAKC,GAAG,SAAS,WACfpD,QAAQC,IAAI,oCACZ6B,EAAae,QAAU,KACvBR,GAAa,SAInBN,EAAOc,QAAQO,GAAG,kBAAkB,SAAA/D,GAClCW,QAAQC,IAAI,iBAAkBZ,GAE9BiF,YAAW,WAETtB,EAAc3D,KACb,UAGJ,CAACuC,IAEJG,EAAOc,QAAQO,GAAG,qBAAqB,SAAA/D,GACjCyC,EAAae,UACfR,GAAa,GACbP,EAAae,QAAQE,UAAY,SAIrChB,EAAOc,QAAQO,GAAG,WAAW,SAACmB,GAC5BhC,EAAcgC,QAGf,IAEHjB,qBAAU,WACR,OAAO,WACLvB,EAAOc,QAAQC,aAEfZ,EAAUW,QAAQ2B,YACfC,SAAQ,SAACC,GACRA,EAAMC,OACND,EAAME,SAAU,KAElB1C,EAAUW,QAAU,QAEvB,IAICb,IACFb,EACE,cAACV,GAAD,CAASoE,aAAW,EAACC,OAAK,EAACC,IAAKtD,EAAWuD,UAAQ,KAIvD,IAAIC,EACA,cAACrE,GAAD,CAAWkE,OAAQxC,EAAYuC,aAAW,EAACE,IAAKjD,EAAckD,UAAQ,IAG1E,OACE,sBAAKlH,MAAO,CAACoH,gBAAiB,SAA9B,UACG9C,GAAa,sBAAKtE,MAAO,CAACoH,gBAAiB,SAA9B,wCAAmE,uBAAnE,IAAyE,cAAC,IAAD,CAAWC,SAAUtE,GAAmBuE,KAAMC,KAAKC,MAAQ,QAApI,OACbnE,EACA8D,EACD,sBAAKnH,MAAO,CAAEyH,SAAU,WAAYC,MAAO,MAAOC,OAAQ,GAAI1H,QAAS,OAAQ2H,eAAgB,gBAAiBC,MAAO,OAAvH,UACE,cAACC,EAAA,EAAD,CAASC,MAAM,UAAf,SACE,eAACC,EAAA,EAAD,CAAQC,QAAQ,SAASxJ,QAAS,kBAAML,EAAQM,KAAK,MAArD,cAA4D,cAAC,IAAD,CAAawJ,SAAS,UAAlF,SAEF,cAACJ,EAAA,EAAD,CAASC,MAAO,aAAerD,EAAU,MAAQ,MAAjD,SACE,eAACsD,EAAA,EAAD,CAAQC,QAAQ,UAAUxJ,QA9GlC,WACEwF,EAAOc,QAAQuB,KAAK,WAAY5B,GAChCC,GAAYD,IA4GN,cAA0DA,EAA2C,cAAC,IAAD,CAASwD,SAAS,UAAnD,cAAC,IAAD,CAAYA,SAAS,UAAzF,SAEF,cAACJ,EAAA,EAAD,CAASC,MAAO,qBAAhB,SACE,eAACC,EAAA,EAAD,CAAQC,QAAQ,YAAYxJ,QAvLd,2CAuLd,cAAmD,cAAC,IAAD,CAAcyJ,SAAS,UAA1E,kB,4DC7NK,OAAIjJ,IAAiB,CAClCC,GAAI,CACFiJ,QAAS,UACTC,OAAQ,SACRC,QAAS,UACTC,QAAS,UACTC,aAAc,sBACdC,OAAQ,SACRC,SAAU,YAEZ/I,GAAI,CACFyI,QAAS,UACTC,OAAQ,cACRC,QAAS,WACTC,QAAS,UACTC,aAAc,oCACdC,OAAQ,gBACRC,SAAU,iBAEZhJ,GAAI,CACF0I,QAAS,YACTC,OAAQ,aACRC,QAAS,aACTC,QAAS,QACTC,aAAc,gCACdC,OAAQ,SACRC,SAAU,eAEZ9I,IAAK,CACHwI,QAAS,eACTC,OAAQ,eACRC,QAAS,2BACTC,QAAS,qBACTC,aAAc,yDACdC,OAAQ,qBACRC,SAAU,kBCmDCtK,gBA3EF,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACb,EAA4CyF,mBAAS,IAArD,mBAAO6E,EAAP,KAAuBC,EAAvB,KACA,EAAgD9E,mBAAS,IAAzD,mBAAO+E,EAAP,KAEMC,EAAmB,CAACF,EAF1B,MAIMG,EAA0B,CAC9B,UACA,UACA,SACA,WAVwB,4CAkB1B,4BAAAxH,EAAA,yDACMsH,IAAqBF,EAD3B,uBAEIK,MAAM,qCAFV,0CAKqBC,IALrB,OAKMtG,EALN,OAMEtE,EAAQM,KAAK,CACX+E,MAAO,CACLC,SAAUkF,EACVrG,OAAQmG,GAEV5D,SAAU/F,SAAoB2D,IAXlC,4CAlB0B,+BAiCXsG,IAjCW,2EAiC1B,sBAAA1H,EAAA,sEACesD,GAAwB8D,EAAgBE,GADvD,oFAjC0B,sBAuC1B,OACE,cAACK,GAAA,EAAD,CAAMrB,eAAe,SAAS5H,MAAO,CAAC6H,MAAO,MAAOzH,YAAa,OAAQ8I,WAAY,IAAK7I,UAAW,KAArG,SACE,gCACE,oBAAIL,MAAO,CAACmJ,aAAc,IAA1B,8BACA,gCAEEN,EAAiB/H,KAAI,SAACsI,EAAGpI,GACvB,OACE,cAACqI,GAAA,EAAD,CAAKC,GAAI,CAAEC,SAAU,IAAKC,cAAe,IAAK7I,UAAW,QAAzD,SACE,eAAC8I,GAAA,EAAD,CAAaC,WAAS,EAAtB,UACE,cAACC,GAAA,EAAD,CAAY1L,GAAG,2BAAf,SAAqD,IAAV+C,EAAc4I,GAAUpB,OAASoB,GAAUnB,WACtF,cAACoB,GAAA,EAAD,CACEC,QAAQ,2BACR7L,GAAG,qBACHwI,MAAgB,GAATzF,EAAa0H,EAAiBE,EACrCmB,MAAO,WACPC,SAAU,SAACC,GAAD,OAzCVC,EAyC4Bd,EAzCpB3C,EAyCuBwD,EAAIE,OAAO1D,WAxC1DyD,EAAOzD,GADT,IAAkByD,EAAQzD,GAoCV,SAQIqC,EAAwBhI,KAAI,SAACC,GAAD,OAAO,eAACqJ,GAAA,EAAD,CAAU3D,MAAO1F,EAAjB,cAAsB6I,GAAU7I,GAAhC,oBAS3B,MAApB6H,GAA4B,eAACZ,EAAA,EAAD,CAAQC,QAAQ,UAAUxJ,QAnEpC,2CAmEU,cAAqDmL,GAAUrB,aAA/D,kBCxDvB8B,GApBF,WACX,OACE,mCACA,sBAAKrK,MAAO,CAACC,QAAS,OAAQ2H,eAAgB,iBAA9C,UACE,cAAC,GAAD,IACA,cAAC,EAAD,UC0BS0C,OAzBf,WACE,MAA4BzG,mBAAS,IAArC,mBAAOtC,EAAP,KAAegJ,EAAf,KAOA,OANA/E,oBAAS,sBAAC,4BAAAlE,EAAA,sEACiBmB,IADjB,OACJ+H,EADI,OAERD,EAAUC,GAFF,2CAGP,IAEHtI,QAAQC,IAAI,qBAAsBZ,GAEhC,qBAAKlD,UAAU,MAAf,SACE,eAAC,IAAD,WACE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOoM,OAAK,EAACC,KXvBH,IWuBsBC,UAAWN,KAC3C,cAAC,IAAD,CAAOI,OAAK,EAACC,KAAM3L,gBAA0B4L,UAAY,SAACvH,GACxD,MAAe,KAAX7B,EAAsB,UAClB,cAAC,GAAD,2BAAU6B,GAAV,IAAiB7B,OAAQA,QAEnC,cAAC,IAAD,CAAOkJ,OAAK,EAACC,KAAM3L,EAAe4L,UAAWzJ,aChBxC0J,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB9E,MAAK,YAAkD,IAA/C+E,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,O","file":"static/js/main.33797db2.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 181;","export const HOME = '/';\nexport const ROOM = '/room';\nexport const SIGN_UP = '/signup';\nexport const LOG_IN = '/login';\nexport const METHOD = '/method';\nexport const FEEDBACK = '/FEEDBACK';","import React from 'react';\nimport { Navbar, Nav } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom';\nimport * as routes from '../routes';\nimport Divider from '@material-ui/core/Divider';\n\nconst Header = ({history}) => {\n  const onSignUpClicked = () => {\n    history.push(routes.SIGN_UP);\n  };\n  const onLoginClicked = () => {\n    history.push(routes.LOG_IN);\n  };\n  const onFeedbackClicked = () => {\n    history.push(routes.FEEDBACK)\n  }\n  const onMethodClicked = () => {\n    history.push(routes.METHOD);\n  };\n  const homeClicked = () => {\n    history.push(routes.HOME);\n  };\n  return (\n    <div className=\"header\">\n      <Navbar expand=\"lg\">\n        <Navbar.Brand onClick={homeClicked}>\n          {' '}\n          <div>\n            CrossTalk (Beta){/*CompanyName*/}\n            {/*<img\n              width={35}\n              alt=\"Company logo\"\n              src={`${process.env.REACT_APP_REACT_URL}/checklist.png`}\n              style={{ paddingLeft: 5, paddingBottom: 5 }}\n            />*/}\n          </div>\n          {' '}\n\n        </Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n        <Nav className=\"ml-auto\">\n            <Nav.Link onClick={onFeedbackClicked}> Feedback </Nav.Link>\n            <Nav.Link onClick={onMethodClicked}> How to use </Nav.Link>\n          </Nav>\n          {\n            /*\n            <Nav.Link onClick={onSignUpClicked}> Sign up </Nav.Link>\n            <Nav.Link onClick={onLoginClicked}> Login </Nav.Link>\n          </Nav>\n             */\n          }\n\n        </Navbar.Collapse>\n      </Navbar>\n      <Divider />\n  </div>\n  ) \n};\n\nexport default withRouter(Header);","import LocalizedStrings from 'react-localization';\n\nexport default new LocalizedStrings({\n en:{\n   whyThisWorks: \"why this works\",\n   howToRule1: \"You speak your native language, they speak their native language.\",\n   howToRule2: \"Never speak the other persons language.\",\n   howToRule3: \"Use actions, drawings, props, and whatever else you need to explain what you are saying.\",\n   howToRule4: \"Never harass anyone for any reason! This is not a dating site!\",\n   howToRule5: \"This is a beta, please provide as much feedback as possible jasongoodisondevelopment@gmail.com\"\n },\n es: {\n    whyThisWorks: \"Por que esto funciona.\",\n    howToRule1: \"Hablas tu lengua materna, ellos hablan la suya.\",\n    howToRule2: \"Nunca hables el idioma de otras personas\",\n    howToRule3: \"Utilice acciones, dibujos, accesorios y cualquier otra cosa que necesite para explicar lo que está diciendo.\",\n    howToRule4: \"¡Nunca acoses a nadie por ningún motivo! ¡Este no es un sitio de citas!\",\n    howToRule5: \"Esta es una versión beta, proporcione la mayor cantidad de comentarios posible jasongoodisondevelopment@gmail.com\"\n },\n fr: {\n  whyThisWorks: \"Pourquoi ça marche.\",\n  howToRule1: \"Hablas tu lengua materna, ellos hablan la suya.\",\n  howToRule2: \"Ne jamais parler la langue des autres.\",\n  howToRule3: \"Utilisez des actions, des dessins, des accessoires et tout ce dont vous avez besoin pour expliquer ce que vous dites.\",\n  howToRule4: \"Ne harcelez jamais personne pour quelque raison que ce soit ! Ceci n'est pas un site de rencontre!\",\n  howToRule5: \"Ceci est une version bêta, veuillez fournir autant de commentaires que possible jasongoodisondevelopment@gmail.com\"\n },\n cmn: {\n  whyThisWorks: \"为什么这有效\",\n  howToRule1: \"你说你的母语，他们说他们的母语\",\n  howToRule2: \"永远不要说其他人的语言。\",\n  howToRule3: \"使用动作、图画、道具和其他任何你需要的东西来解释你在说什么。\",\n  howToRule4: \"永远不要以任何理由骚扰任何人。这不是约会网站\",\n  howToRule5: \"这是一个测试版，请提供尽可能多的反馈 jasongoodisondevelopment@gmail.com\"\n }\n});","import React from 'react';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport RuleStrings from '../localization/rules';\n\nimport Accordion from '@mui/material/Accordion';\nimport AccordionSummary from '@mui/material/AccordionSummary';\nimport AccordionDetails from '@mui/material/AccordionDetails';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport { Divider } from '@mui/material';\n\nconst HowToUse = () => {\n  const rules = [\n    <div>{RuleStrings.howToRule1} (<a href=\"/method\"> {RuleStrings.whyThisWorks} </a>)</div>,\n    RuleStrings.howToRule2,\n    RuleStrings.howToRule3,\n    RuleStrings.howToRule4,\n    RuleStrings.howToRule5\n  ]\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginRight: 150, marginTop: 100}}>\n      <Accordion style={{ maxWidth: 500 }} expanded={true}>\n        <AccordionSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"panel1a-content\"\n          id=\"panel1a-header\"\n        >\n          <h2 style={{textAlign: 'center'}}> Rules </h2>\n        </AccordionSummary>\n        <AccordionDetails>\n        <List>\n        {\n          rules.map((x, index) => {\n            return (\n              <ListItem>\n                  <div style={{display: 'flex'}}> {index + 1}.{'  '} {x} </div>\n                  <Divider/>\n              </ListItem>\n            )\n          })\n        }\n        </List>\n        </AccordionDetails>\n      </Accordion>\n    </div>\n  ) \n};\n\nexport default HowToUse;","import React from 'react';\nimport HowToUse from './HowToUse';\n\nconst Method = () => {\n  return (\n    <HowToUse/>\n  ) \n};\n\nexport default Method;","\nconst BASE_ADDRESS = process.env.REACT_APP_API_URL;\n\nexport async function GetUserId() {\n  let userId = localStorage.getItem('userId')\n  if (userId === null) {\n    userId = await CreateNewEmphemeralAccount();\n    localStorage.setItem('userId', userId)\n  }\n\n  return userId;\n}\n\nexport async function CreateNewEmphemeralAccount() {\n  const res = await fetch(`${BASE_ADDRESS}/users/createNewEphemeralAccount`, { method: 'POST', body: JSON.stringify({}) });\n  console.log(\"res\", res)\n  const json = await res.json();\n\n  const { _id: userId } = json;\n\n  return userId;\n}","import * as userApi from './userApi';\nconst BASE_ADDRESS = process.env.REACT_APP_API_URL;\n\n\nexport async function GetJoinableRoom(native, language, roomToAvoid = null) {\n  console.log(\"whats my id\")\n  const userId = await userApi.GetUserId();\n  console.log(\"got one, its \", userId)\n\n  const res = await fetch(`${BASE_ADDRESS}/rooms/getJoinableRoom/?native=${native}&learning=${language}&userId=${userId}`);\n  const json = await res.json();\n\n  const { roomId } = json;\n\n  return roomId;\n}\n\n\n","import React, { useEffect, useState, useRef } from 'react';\nimport io from 'socket.io-client';\nimport Peer from 'peerjs';\nimport styled from 'styled-components';\nimport Countdown from 'react-countdown';\nimport Button from 'react-bootstrap/Button';\nimport CallEndIcon from '@mui/icons-material/CallEnd';\nimport MicOffIcon from '@mui/icons-material/MicOff';\nimport MicIcon from '@mui/icons-material/Mic';\nimport NextPlanIcon from '@mui/icons-material/NextPlan';\nimport { Tooltip } from '@mui/material';\nimport { withRouter } from 'react-router';\nimport * as roomApi from '../api/roomApi';\nimport * as routes from '../routes';\n\n\nconst MyVideo = styled.video`\n  width: 22%;\n  height: 22%;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n`;\n\nconst MainVideo = styled.video`\nheight: 94vh;\nwidth: 94vw;\n`;\n\n// Renderer callback with condition\nconst countdownRenderer = ({ hours, minutes, seconds, completed }) => {\n  if (completed) {\n    // Render a completed state\n    return <div> We aren't finding anyone. Please keep this page open and we will keep looking </div>\n  } else {\n    // Render a countdown\n    return <span>{minutes}:{seconds}</span>;\n  }\n};\n\nconst Room = (props) => {\n  \n  const\n  {\n    match: {\n      params: {\n        roomId,\n      },\n    },\n    userId,\n    history,\n    location: {\n      state: {\n        native,\n        learning\n      }\n    }\n  } = props;\n\n\n  const userVideo = useRef();\n  const [newRoom, setNewRoom] = useState(0)\n  const partnerVideo = useRef();\n  const socket = useRef();\n  const [stream, setStream] = useState();\n  const streamRef = useRef()\n  const peerRef = useRef();\n  const [searching, setSearching] = useState(true);\n  const [theirMicOn, setTheirMicOn] = useState(true);\n  const [myMicOn, setMyMicOn] = useState(true);\n\n  console.log(\"NATIVE\", native, learning, props)\n\n  async function findNewRoom() {\n    console.log(\"Going to find another user to meet with\")\n    var newRoomId = await roomApi.GetJoinableRoom(native, learning);\n    history.push({\n      state: {\n        learning,\n        native\n      },\n      pathname: routes.ROOM + \"/\" + newRoomId\n    })\n    socket.current.disconnect();\n    partnerVideo.current.srcObject = null\n    // TODO: This is an ugly hack if I've ever seen one\n    // force a new run of the useeffect to recreate the socket\n    setNewRoom(newRoom + 1)\n  }\n\n  function connectToUser(otherUserId) {\n    const peer = peerRef.current;\n    console.log(\"peer before clal\", peer)\n    console.log(\"Calling \", otherUserId, \" with \", stream)\n    const call = peer.call(otherUserId, streamRef.current)\n\n    console.log(\"CALL\", call)\n\n    call.on('stream', userVideoStream => {\n      console.log(\"stream coming in\", userVideoStream)\n      partnerVideo.current.srcObject = userVideoStream;\n      setSearching(false);\n    })\n\n    call.on('close', () => {\n      partnerVideo.current = null\n      setSearching(true);\n    })\n  }\n\n  function sendMicOffRequest() {\n    socket.current.emit(\"mic set\", !myMicOn);\n    setMyMicOn(!myMicOn);\n  }\n\n\n  useEffect(() => {\n    console.log(\"RUNNING THE USEEFFECT HERER\")\n    socket.current = io.connect(process.env.REACT_APP_API_URL, { transports : ['websocket'] });\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {\n      setStream(stream);\n      streamRef.current = stream;\n      if (userVideo.current) {\n        userVideo.current.srcObject = stream;\n      }\n\n      const peer = new Peer({\n        initiator: true,\n        stream: stream,\n        host: 'peerjs-server.herokuapp.com',\n        port: 443,\n        secure: true\n      })\n      peerRef.current = peer;\n  \n      peer.on('open', id => {\n        socket.current.emit('set userId', userId);\n        socket.current.on('ready userId', function () {\n          console.log('Associated! Going to join room');\n          socket.current.emit('join-room', roomId, id)\n        });\n      })\n  \n      peer.on('call', call => {\n        console.log(\"Receiving a call. Answering it now\")\n        setSearching(false)\n          call.answer(streamRef.current)\n  \n          call.on('stream', stream => {\n            console.log(\"Stream incoming\")\n            if (partnerVideo.current) {\n              partnerVideo.current.srcObject = stream;\n            }\n          })\n          call.on('close', () => {\n            console.log(\"Stream from incoming call closed\")\n            partnerVideo.current = null\n            setSearching(true);\n          })\n      })\n  \n      socket.current.on('user-connected', userId => {\n        console.log(\"user connected\", userId)\n        // user is joining\n        setTimeout(() => {\n          // user joined\n          connectToUser(userId)\n        }, 1000)\n      })\n      \n    }, [newRoom])\n\n    socket.current.on('user-disconnected', userId => {\n      if (partnerVideo.current) {\n        setSearching(true);\n        partnerVideo.current.srcObject = null\n      }\n    })\n\n    socket.current.on('mic set', (value) => {\n      setTheirMicOn(value)\n    })\n\n  }, [])\n\n  useEffect(() => {\n    return () => {\n      socket.current.disconnect();\n\n      streamRef.current.getTracks()\n        .forEach((track) => {\n          track.stop()\n          track.enabled = false\n        });\n        streamRef.current = null;\n    }\n  }, [])\n\n\n  let UserVideo;\n  if (stream) {\n    UserVideo = (\n      <MyVideo playsInline muted ref={userVideo} autoPlay />\n    );\n  }\n\n  let PartnerVideo = (\n      <MainVideo muted={!theirMicOn} playsInline ref={partnerVideo} autoPlay />\n  );\n  \n  return (\n    <div style={{backgroundColor: 'black'}}>\n      {searching && <div style={{backgroundColor: 'white'}}> Searching for partner ... <br/> <Countdown renderer={countdownRenderer} date={Date.now() + 299 * 1000} /> </div> }\n      {UserVideo}\n      {PartnerVideo}\n      <div style={{ position: 'absolute', right: '46%', bottom: 10, display: 'flex', justifyContent: 'space-between', width: \"13%\"}}>\n        <Tooltip title=\"Hang up\">\n          <Button variant=\"danger\" onClick={() => history.push('/')}> <CallEndIcon fontSize=\"large\"/> </Button>\n        </Tooltip>\n        <Tooltip title={\"Turn Mic \" + (myMicOn ? \"Off\" : \"On\")}>\n          <Button variant=\"primary\" onClick={sendMicOffRequest}> { !myMicOn ? <MicOffIcon fontSize=\"large\"/> : <MicIcon fontSize=\"large\"/> } </Button>\n        </Tooltip>\n        <Tooltip title={\"Find a new partner\"}>\n          <Button variant=\"secondary\" onClick={findNewRoom}> <NextPlanIcon fontSize=\"large\"/> </Button>\n        </Tooltip>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(Room);","import LocalizedStrings from 'react-localization';\n\nexport default new LocalizedStrings({\n  en: {\n    English: \"English\",\n    French: \"French\",\n    Spanish: \"Spanish\",\n    Chinese: \"Chinese\",\n    FindAPartner: \"Find a partner now!\",\n    Native: \"Native\",\n    Learning: \"Learning\"\n  },\n  fr: {\n    English: \"Anglais\",\n    French: \"Français\",\n    Spanish: \"Espagnol\",\n    Chinese: \"Chinois\",\n    FindAPartner: \"Trouvez un partenaire maintenant!\",\n    Native: \"Originaire de\",\n    Learning: \"Apprentissage\"\n  },\n  es: {\n    English: \"Inglés\",\n    French: \"Francés\",\n    Spanish: \"Español\",\n    Chinese: \"Chino\",\n    FindAPartner: \"¡Encuentra un socio ahora!\",\n    Native: \"Nativo\",\n    Learning: \"Aprendiendo\"\n  },\n  cmn: {\n    English: \"英语\",\n    French: \"法语\",\n    Spanish: \"西班牙语\",\n    Chinese: \"中国人\",\n    FindAPartner: \"立即寻找合作伙伴！\",\n    Native: \"本国的\",\n    Learning: \"学习\"\n  }\n});","import React, {useState} from 'react';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport { withRouter } from 'react-router-dom';\nimport Box from '@mui/material/Box';\nimport Button from 'react-bootstrap/Button';\nimport InputLabel from '@mui/material/InputLabel';\nimport * as roomApi from '../api/roomApi';\nimport * as routes from '../routes';\nimport { Grid } from '@mui/material';\nimport Languages from \"../localization/languages\"; \n\nconst Form = ({history}) => {\n  const [nativeLanguage, setNativeLanguage] = useState(\"\");\n  const [learningLanguage, setLearningLanguage] = useState(\"\")\n\n  const fieldSettingList = [setNativeLanguage, setLearningLanguage];\n\n  const languageLearningOptions = [\n    \"English\",\n    \"Spanish\",\n    \"French\",\n    \"Chinese\",\n  ]\n\n  \n  function onChange(setter, value) {\n    setter(value)\n  }\n\n  async function findPartnerNow() {\n    if (learningLanguage === nativeLanguage) {\n      alert(\"Please choose different languages\");\n      return;\n    }\n    let roomId = await getJoinableRoomId();\n    history.push({\n      state: {\n        learning: learningLanguage,\n        native: nativeLanguage\n      },\n      pathname: routes.ROOM + \"/\" + roomId\n    })\n  }\n\n  async function getJoinableRoomId() {\n    return await roomApi.GetJoinableRoom(nativeLanguage, learningLanguage);\n  }\n\n\n  //backgroundColor: 'white', padding: 32, position: \"absolute\"\n  return (\n    <Grid justifyContent=\"center\" style={{width: '25%', marginRight: 'auto', marginLeft: 200, marginTop: 100}}>\n      <div>\n        <h1 style={{marginBottom: 30}}>CrossTalk (Beta)</h1>\n        <div>\n        {\n          fieldSettingList.map((y, index) => {\n            return (\n              <Box sx={{ minWidth: 120, paddingBottom: 1.5, textAlign: \"left\" }}>\n                <FormControl fullWidth>\n                  <InputLabel id=\"demo-simple-select-label\">{index === 0 ? Languages.Native : Languages.Learning}</InputLabel>\n                  <Select\n                    labelId=\"demo-simple-select-label\"\n                    id=\"demo-simple-select\"\n                    value={index == 0 ? nativeLanguage : learningLanguage}\n                    label={\"Learning\"}\n                    onChange={(evt) => onChange(y, evt.target.value)}\n                  >\n                    {\n                      languageLearningOptions.map((x) => <MenuItem value={x}> {Languages[x]} </MenuItem>)\n                    }\n                  </Select>\n                </FormControl>\n              </Box>\n            )\n          })\n        }\n        {\n          learningLanguage != null && <Button variant=\"primary\" onClick={findPartnerNow}> {Languages.FindAPartner} </Button>\n        }\n        </div>\n      </div>\n    </Grid>\n  );\n};\n\nexport default withRouter(Form);","import React, {useState} from 'react';\nimport HowToUse from './HowToUse';\nimport Form from './Form';\n\nconst Home = () => {\n  return (\n    <>\n    <div style={{display: 'flex', justifyContent: 'space-between'}}>\n      <Form/>\n      <HowToUse/>\n    </div>\n    </>\n  );\n};\n\n/**\n * style={{\n      backgroundImage: \"url(https://media.istockphoto.com/photos/landscape-of-coron-busuanga-island-palawan-province-philippines-picture-id521110659)\",\n      backgroundRepeatX: \"no-repeat\",\n      backgroundSize: \"cover\",\n      height: \"100vh\"\n    }}\n */\n\nexport default Home;","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Header from './components/Header';\nimport Method from './components/Method';\nimport './App.css';\nimport Room from './components/Room';\nimport * as routes from './routes.js';\nimport * as userApi from './api/userApi';\nimport { useEffect, useState } from 'react';\nimport Home from './components/Home';\n\nfunction App() {\n  const [userId, setUserId] = useState('');\n  useEffect(async () => {\n    let loadedUserId = await userApi.GetUserId();\n    setUserId(loadedUserId);\n  }, []);\n\n  console.log(\"GOT MY USER ID ITS\", userId);\n  return (\n    <div className=\"App\">\n      <Router>\n        <Header />\n        <Switch>\n          <Route exact path={routes.HOME} component={Home} />\n          <Route exact path={routes.ROOM + \"/:roomId\"} component={ (props) => {\n            if (userId === '') return 'Loading';\n            return (<Room {...props} userId={userId} />);\n          } } />\n          <Route exact path={routes.METHOD} component={Method} />\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}